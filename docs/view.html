<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>
        Sloth Framework - View    </title>
    <meta name="keywords" content="sloths, php, framework, orm, routing, mvc, web">
    <meta name="description" content="Sloths - The small PHP framework for lazy man.">
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="/sloths/assets/vendor/codemirror/4.1/lib/codemirror.css" rel="stylesheet">
    <link href="/sloths/assets/vendor/codemirror/4.1/theme/mdn-like.css" rel="stylesheet">
    <link href="/sloths/assets/stylesheets/application.css" rel="stylesheet">    </head>
<body>
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/sloths/index.html">Sloths Framework</a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/sloths/docs/installation.html">Documentation</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-3">
            <br>
            <br>
            <ul class="nav">
                <li>
                    <a href="#"><b>Getting Started</b></a>
                    <ul>
                        <li><a href="/sloths/docs/installation.html">Installation</a></li>
                        <li><a href="/sloths/docs/system-requirements.html">System Requirements</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#"><b>Application</b></a>
                    <ul>
                        <li><a href="/sloths/docs/application-structure.html">Application Structure</a></li>
                        <li><a href="/sloths/docs/server-configuration.html">Server Configuration</a></li>
                        <li><a href="/sloths/docs/routing.html">Routing</a></li>
                        <li><a href="/sloths/docs/request.html">Request</a></li>
                        <li><a href="/sloths/docs/response.html">Response</a></li>
                        <li>
                            <a href="/sloths/docs/view.html">View</a>
                            <ul>
                                <li><a href="/sloths/docs/view/helpers.html">Helpers</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#"><b>Database</b></a>
                    <ul>
                        <li><a href="/sloths/docs/databases/connection.html">Connection</a></li>
                        <li><a href="/sloths/docs/databases/query-builder.html">Query Builder</a></li>
                    </ul>
                </li>
                <li>
                    <a href="/sloths/docs/orm/define-model.html"><b>ORM</b></a>
                    <ul>
                        <li><a href="/sloths/docs/orm/define-model.html">Defining Models</a></li>
                        <li>
                            <a href="/sloths/docs/orm/model-overview.html">Model Interaction</a>
                            <ul>
                                <li><a href="/sloths/docs/orm/model-overview.html">Overview</a></li>
                                <li><a href="/sloths/docs/orm/model.html">Model</a></li>
                                <li><a href="/sloths/docs/orm/collection.html">Collection</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="/sloths/docs/orm/relationship-overview.html">Relationship</a>
                            <ul>
                                <li><a href="/sloths/docs/orm/relationship-overview.html">Overview</a></li>
                                <li><a href="/sloths/docs/orm/relationship-has-one.html">Has One</a></li>
                                <li><a href="/sloths/docs/orm/relationship-has-many.html">Has Many</a></li>
                                <li><a href="/sloths/docs/orm/relationship-belongs-to.html">Belongs To</a></li>
                                <li><a href="/sloths/docs/orm/relationship-has-many-through.html">Has Many Through</a></li>
                            </ul>
                        </li>

                    </ul>
                </li>
                <li>
                    <a href="#"><b>Development Tools</b></a>
                    <ul>
                        <li><a href="#">Console</a></li>
                        <li><a href="#">Model Generator</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="col-md-9">
            <div class="page-header">
    <h1>View</h1>
</div>

<p>The View exists to keep the view script separate from the model & route script.
    It provides a system of helpers, filters, variables and layout manager.</p>

<p>Commonly, your route script creates an instance of View and assign variables to that instance.
    The route script will return output string from view by call <code>render</code>.</p>

<code>routes/posts.php</code>
<textarea class="code">
    $this->get('/::id', function($id) {
        $post = Post::first($id);
        $post || $this->notFound();

        return $this->render('posts/view', [
            'post' => $post
        ]);
    });
</textarea>
<br>

<code>views/posts/view.html.php</code>
<textarea class="code" data-type="application/x-httpd-php">
    <h3>&lt;?= $this->escape($post->title) ?&gt;</h3>
    &lt;?= $post->content ?&gt;
</textarea>
<br>

<h4>View Script Directory</h4>
<p>Usually, you would like to set the directory of view scripts, it make the view script name is shorter when calling the <code>render</code>,
and make less effort when moving view scripts to another directory. You can change the default directory of all view script by calling <code>setDirectory</code> method.
</p>
<p>By default, the view script directory is <code>your-application-path/views</code>.
    If you call <code>render</code> with relative script path (<code>render('posts/view')</code>), the actual script file will be <code>your-application-path/views/posts.view.html.php</code>.<br>
    But if you all <code>render</code> with absolute script path (start with <code>/</code>), the view directory is ignore. <code>render('/posts/view')</code>,
    the actual view script path will be <code>/posts/view.html.php</code>
</p>

<h4>View Script Extension</h4>
<p>The view script extension is optional when calling <code>render</code>.
    It will assume the extension is <code>.html.php</code> by default,
    but you can changes to whatever you like by calling <code>setExtension</code> method or just simple calling <code>render</code> with view script and extension.</p>

<textarea class="code">
    $this->view->setExtension('phtml');
    $this->render('posts/view');

    // or
    $this->render('posts/view.phtml');
</textarea>
<br>

<h4>Passing Variables To View Script</h4>
<p>Passing variables to view script by calling <code>setVar</code>, <code>setVars</code> or <code>addVars</code></p>
<textarea class="code">
    $this->view->setVar('foo', 'foo');
    // view variables is: ['foo' => 'foo', 'bar' => 'bar']

    $this->view->setVars(['foo' => 'bar', 'baz' => 'baz']);
    // view variables is: ['foo' => 'bar', 'baz' => 'baz'], the variables was reset and re assign

    $this->view->addVars(['baz' => 'qux', 'qux' => 'qux']);
    // view variables is: ['foo' => 'bar', 'baz' => 'qux', 'qux' => 'qux']
</textarea>
<br>
<p>Or simply, just passing the variables to the seconds arguments when calling <code>render</code></p>
<textarea class="code">
    $this->render('posts/view', [
        'post' => $post
    ]);

    // view variables is ['post' => $post]
</textarea>
<h4>View and Layouts</h4>
<p>The layout manager is very helpful. For example, when you want all your view scripts wrapped by the header and footer.
    You could define the header and footer in separate script called <code>layout</code>, and the body content is defined in a separate view script file.</p>

<code>views/_layouts/default.html.php</code>
<textarea class="code" data-type="application/x-httpd-php">
    <header>My Header</header>

    &lt;?= $this->content() ?&gt;

    <footer>My Footer</footer>
</textarea>
<br>
<code>views/posts/view.html.php</code>
<textarea class="code" data-type="application/x-httpd-php">
    <h3>&lt;?= $this->escape($post->title) ?&gt;</h3>
    <p>&lt;?= $post->content ?&gt;</p>
</textarea>
<br>
<code>routes/posts.php</code>
<textarea class="code">
    $this->get('/::id', function($id) {
        $post = Post::first($id);

        $this->setLayout('default'); // is the same of $this->view->setLayout('default')

        return $this->render('posts/view', ['post' => $post]);
    });
</textarea>
<br>
The output is:
<textarea class="code" data-type="application/x-httpd-php">
    <header>My Header</header>
    <h3>Post title</h3>
    <p>Post content</p>
    <footer>My Footer</footer>
</textarea>
<br>
<div class="alert alert-info">
    <p>If you set config the layout and want to disable it in some case, like fetching script content without wrap layout, just call <code>setLayout(false)</code></p>
</div>
<h4>Where you can config the layout?</h4><br>
<p>You can config the layout in some places:</p>
<code>1. View config file: application/config/view.php</code>
<textarea class="code">
    $this->setLayout('default');
</textarea>
<br>

<code>2. Within your route script or route file: routes/posts.php</code>
<textarea class="code">
    $this->setLayout('default');

    $this->get('/', function() {
        // or
        $this->setLayout('default');

        //....
    })
</textarea>
<br>

<code>3. Or inside your view script: views/posts/view.html.php</code>
<textarea class="code" data-type="application/x-httpd-php">
    &lt;?php $this->setLayout('default') ?&gt;

    &lt;?= $this->escape($post->title) ?&gt;
    &lt;?= $post->content ?&gt;
</textarea>

<h4>Nested layout</h4>
<p>It is very simple to setting up the nested layouts by calling <code>setLayout()</code> inside a layout. By this way, you can structure nested layout.</p>
<p>For example, you have the layout (<code>default</code>) with footer and header like above,
    now you want to have a layout (<code>sidebar</code>) with left sidebar, the <code>sidebar</code> layout extends <code>default</code> layout.</p>
<code>views/_layouts/sidebar.html.php</code>
<textarea class="code">
    &lt;php $this->setLayout('default') ?&gt;
    <nav class="left-sidebar">
        Left Sidebar
    </nav>
    <div class="content-container">
        &lt;?= $this->content() ?%gt;
    </div>
</textarea>
<br>
<p>And now you want to render <code>views/posts/view.html.php</code> with <code>sidebar</code> layout</p>
<code>routes/posts.php</code>
<textarea class="code">
    $this->get('/::id', function($id) {
        $post = Post::first($id);

        $this->setLayout('sidebar');
        return $this->render('posts/view', ['post' => $post]);
    });
</textarea>
<br>

<p>The output string now is:</p>
<textarea class="code" data-type="application/x-httpd-php">
    <header>My Header</header>
    <nav class="left-sidebar">
        Left Sidebar
    </nav>
    <div class="content-container">
        <h3>Post title</h3>
        <p>Post content</p>
    </div>
    <footer>My Footer</footer>
</textarea>        </div>
    </div>
</div>

<br>

<div class="container">
    <div class="row">
        <div class="col-md-9 col-md-offset-3">
            <hr>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'slothsframeworkdocumentation'; // required: replace example with your forum shortname

                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </div>
</div>

<hr>

<footer>
    <div class="container">
        <div>
            <div class="pull-left">
                <iframe src="http://ghbtns.com/github-btn.html?user=lytc&repo=sloths&type=watch&count=true"
                        allowtransparency="true" frameborder="0" scrolling="0" width="100" height="20"></iframe>
                <iframe src="http://ghbtns.com/github-btn.html?user=lytc&repo=sloths&type=fork&count=true"
                        allowtransparency="true" frameborder="0" scrolling="0" width="100" height="20"></iframe>
                <iframe src="http://ghbtns.com/github-btn.html?user=lytc&repo=sloths&type=follow&count=true"
                        allowtransparency="true" frameborder="0" scrolling="0" width="180" height="20"></iframe>
            </div>
        </div>
        <div class="pull-right">
            <ul class="list-inline">
                <li><a href="https://github.com/lytc/sloths">GitHub</a></li>
                <li><a href="/sloths/docs/installation.html">Documentation</a></li>
            </ul>
        </div>
    </div>
</footer>
<br>
<br>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

<script src="/sloths/assets/vendor/codemirror/4.1/lib/codemirror.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/lib/util/formatting.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/addon/edit/matchbrackets.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/htmlmixed/htmlmixed.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/xml/xml.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/javascript/javascript.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/css/css.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/clike/clike.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/php/php.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/nginx/nginx.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/sql/sql.js"></script>
<script src="/sloths/assets/javascripts/application.js"></script><script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-50648420-1', 'lytc.github.io');
    ga('send', 'pageview');

</script>
</body>
</html>