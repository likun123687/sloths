<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>
        Sloth Framework - View - Helpers    </title>
    <meta name="keywords" content="sloths, php, framework, orm, routing, mvc, web">
    <meta name="description" content="Sloths - The small PHP framework for lazy man.">
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="/sloths/assets/vendor/codemirror/4.1/lib/codemirror.css" rel="stylesheet">
    <link href="/sloths/assets/vendor/codemirror/4.1/theme/mdn-like.css" rel="stylesheet">
    <link href="/sloths/assets/stylesheets/application.css" rel="stylesheet">    </head>
<body>
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/sloths/index.html">Sloths Framework</a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/sloths/docs/installation.html">Documentation</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-3">
            <br>
            <br>
            <ul class="nav">
                <li>
                    <a href="#"><b>Getting Started</b></a>
                    <ul>
                        <li><a href="/sloths/docs/installation.html">Installation</a></li>
                        <li><a href="/sloths/docs/system-requirements.html">System Requirements</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#"><b>Application</b></a>
                    <ul>
                        <li><a href="/sloths/docs/application-structure.html">Application Structure</a></li>
                        <li><a href="/sloths/docs/server-configuration.html">Server Configuration</a></li>
                        <li><a href="/sloths/docs/routing.html">Routing</a></li>
                        <li><a href="/sloths/docs/request.html">Request</a></li>
                        <li><a href="/sloths/docs/response.html">Response</a></li>
                        <li>
                            <a href="/sloths/docs/view.html">View</a>
                            <ul>
                                <li><a href="/sloths/docs/view/helpers.html">Helpers</a></li>
                                <li><a href="/sloths/docs/view/custom-helpers.html">Custom Helpers</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#"><b>Database</b></a>
                    <ul>
                        <li><a href="/sloths/docs/databases/connection.html">Connection</a></li>
                        <li><a href="/sloths/docs/databases/query-builder.html">Query Builder</a></li>
                    </ul>
                </li>
                <li>
                    <a href="/sloths/docs/orm/define-model.html"><b>ORM</b></a>
                    <ul>
                        <li><a href="/sloths/docs/orm/define-model.html">Defining Models</a></li>
                        <li>
                            <a href="/sloths/docs/orm/model-overview.html">Model Interaction</a>
                            <ul>
                                <li><a href="/sloths/docs/orm/model-overview.html">Overview</a></li>
                                <li><a href="/sloths/docs/orm/model.html">Model</a></li>
                                <li><a href="/sloths/docs/orm/collection.html">Collection</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="/sloths/docs/orm/relationship-overview.html">Relationship</a>
                            <ul>
                                <li><a href="/sloths/docs/orm/relationship-overview.html">Overview</a></li>
                                <li><a href="/sloths/docs/orm/relationship-has-one.html">Has One</a></li>
                                <li><a href="/sloths/docs/orm/relationship-has-many.html">Has Many</a></li>
                                <li><a href="/sloths/docs/orm/relationship-belongs-to.html">Belongs To</a></li>
                                <li><a href="/sloths/docs/orm/relationship-has-many-through.html">Has Many Through</a></li>
                            </ul>
                        </li>

                    </ul>
                </li>
<!--                <li>-->
<!--                    <a href="#"><b>Development Tools</b></a>-->
<!--                    <ul>-->
<!--                        <li><a href="#">Console</a></li>-->
<!--                        <li><a href="#">Model Generator</a></li>-->
<!--                    </ul>-->
<!--                </li>-->
            </ul>
        </div>
        <div class="col-md-9">
            <div class="page-header">
    <h1>View Helpers</h1>
</div>

<p><b>Sloths</b> shipping with a lot of builtin useful helpers</p>

<h4>HTML Assets Tag Helpers</h4>
<code>views/my-view-script.html.php</code>
<textarea class="code" data-type="application/x-httpd-php">
    &lt;?= $this->scriptTag('/assets/javascripts/application.js') ?&gt;
    &lt;?= $this->stylesheetTag('/assets/stylesheets/application.css') ?&gt;
    &lt;?= $this->imageTag('/assets/images/pic.jpg') ?&gt;
</textarea>
<br>
The output is:
<textarea class="code">
    <script src="/assets/javascripts/application.js"></script>
    <link href="/assets/stylesheets/application.css" rel="stylesheet">
    <img src="/assets/images/pic.jpg"></textarea>
<br>

<h4>Disable Caching Assets Tag</h4>
<p>As you know, the assets tag might caching by the browser.
    For example, sometime you changes the javascript code,
    but you might need press <code>Ctrl+F5</code> on Windows or <code>Cmd+F5</code> on Mac to tell browser update your script code.
    Is is bad for end user, they don't know you was changes the script code.
    Solved that problem is very simple, just append the assert script source url with a increment parameter version number whenever you change the script code.
</p>

Commonly, I'm do that by this way:
<code>application/config/view.php</code>
<textarea class="code">
    \Sloths\View\Helper\AssetTag::setDefaultDisableCachingParam('v1'); // for all asset tags
    \Sloths\View\Helper\ScriptTag::setDefaultDisableCachingParam('v1'); // for all javascript tags
    \Sloths\View\Helper\StylesheetTag::setDefaultDisableCachingParam('v1'); // for all stylesheet tags
    \Sloths\View\Helper\ImageTag::setDefaultDisableCachingParam('v1'); // for all images tags
</textarea>
<p>Changes <code>v1</code> to <code>v2</code>, <code>v3</code>,.. whenever you change the script code.</p>
<p>And now you call asset tag helper like above, the output is:</p>
<textarea class="code">
    <script src="/assets/javascripts/application.js?v1"></script>
    <link href="/assets/stylesheets/application.css?v1" rel="stylesheet">
    <img src="/assets/images/pic.jpg?v1"></textarea>
<p>Or if you want to directive config per assert by calling: <code>setDisableCachingParam('v1')</code></p>
<textarea class="code">
    &lt;?= $this->scriptTag('/assets/javascripts/application.js')->setDisableCachingParam('v2') ?&gt;
    &lt;?= $this->stylesheetTag('/assets/stylesheets/application.css')->setDisableCachingParam('v3') ?&gt;
    &lt;?= $this->imageTag('/assets/images/pic.jpg')->setDisableCachingParam('v4') ?&gt;
</textarea>
<br>

<p>The output now is:</p>
<textarea class="code">
    <script src="/assets/javascripts/application.js?v2"></script>
    <link href="/assets/stylesheets/application.css?v3" rel="stylesheet">
    <img src="/assets/images/pic.jpg?v4"></textarea>
<br>

<div class="alert alert-danger">
    <p>For development mode, I recommend you to set the disable caching param value to <code>time()</code></p>
</div>
<textarea class="code">
    \Sloths\View\Helper\AssetTag::setDefaultDisableCachingParam(time());
    </textarea>
<br>

<p>The output look like:</p>
<textarea class="code">
    <script src="/assets/javascripts/application.js?1400636579"></script>
    <link href="/assets/stylesheets/application.css?1400636579" rel="stylesheet">
    <img src="/assets/images/pic.jpg?1400636579"></textarea>

<h4>Escape Helper</h4>
<code>views/my-view-script.php</code>
<textarea class="code" data-type="application/x-httpd-php">
    &lt;?= $this->escape('<div>'); ?&gt;
</textarea>
<p>output: <code>&amp;lt;div&amp;gt;</code></p>

<h4>FormatDateTime & FormatDate Helper</h4>
<textarea class="code">
    &lt;?= $this->formatDateTime('2014-05-21 01:42:59') ?&gt;
    // Output: May 21, 2014 01:42:59 AM

    &lt;?= $this->formatDate('2014-05-21') ?&gt;
    // Output: May 21, 2014

    &lt;?php \Sloths\View\Helper\FormatDateTime::setDefaultOutputFormat('c') ?&gt;
    &lt;?= $this->formatDateTime(date('Y-m-d H:i:s')) ?&gt;
    // Output: 2014-05-21T01:42:59+00:00

    &lt;?= $this->formatDateTime(date('Y-m-d H:i:s'))->setOutputFormat('r') ?&gt;
    // Output: Wed, 21 May 2014 01:42:59 +0000</textarea>

<h4>MailTo Helper</h4>
<textarea class="code">
    $this->mailTo('prtran@gmail.com');
    // output: <a href="mailto:prtran@gmail.com">prtran@gmail.com</a>

    $this->mailTo(['prtran@gmail.com' => 'Ly Tran'], ['cc' => 'foo@example.com', 'bcc' => ['bar@example.com'], 'subject' => 'Subject', 'body' => 'Body'])
    //output: <a href="mailto:Ly%20Tran(prtran@gmail.com)?cc=foo%40example.com&amp;bcc=bar%40example.com&amp;subject=Subject&amp;body=Body">Ly Tran(prtran@gmail.com)</a></textarea>

<h4>Partial & PartialLoop Helper</h4>
<code>views/partial.html.php</code>
<textarea class="code" data-type="application/x-httpd-php">
    Name: <?= $name ?></textarea>
<code>views/my-view-scripts.php</code>
<textarea class="code" data-type="application/x-httpd-php">
    <h3>My View</h3>

<?= $this->partial('partial') ?>

<ul>
    <?= $this->partialLoop('item', $items) ?>
</ul></textarea>
<code>routes/my-route.php</code>
<textarea class="code">
    $this->get('/', function() {
        return $this->render('my-view-script', [
            'name' => 'Ly Tran',
            'items' => [
                ['name' => 'Foo'],
                ['name' => 'Bar']
            ]
        ]);
    });
</textarea>
Output:
<textarea class="code" data-type="application/x-httpd-php">
    <h3>My View</h3>

Name: Ly Tran
<ul>
    <li>Foo</li>
<li>Bar</li>
</ul></textarea>

<h4>Capture Helper</h4>
<code>views/_layouts/default.html.php</code>
<textarea class="code" data-type="application/x-httpd-php">
    <html>
        <head>
            <title><?= $this->capture('title') ?></title>
            <?= $this->capture('stylesheets') ?>

            <?= $this->capture('javascripts')->setRenderer([$this, 'scriptTag']) ?>

        </head>
        <body>
            <?= $this->content() ?>

        </body>
    </html></textarea>
<code>views/content.html.php</code>
<textarea class="code" data-type="application/x-httpd-php">
    <?php $this->capture('title', 'My Site Title') ?>
<?php $this->capture('stylesheets', $this->stylesheetTag('/assets/stylesheets/application.css')) ?>
<?php $this->capture('javascripts', ['/assets/javascripts/foo.js', '/assets/javascripts/bar.js']) ?>
<p>Content</p></textarea>
<code>routes/my-route.php</code>
<textarea class="code">
    $this->get('/', function() {
        $this->setLayout('default');
        return $this->render('content');
    });
</textarea>
Output:
<textarea class="code" data-type="application/x-httpd-php">
    <html>
        <head>
            <title>My Site Title</title>
            <link href="/assets/stylesheets/application.css" rel="stylesheet">
            <script src="/assets/javascripts/foo.js"></script><script src="/assets/javascripts/bar.js"></script>
        </head>
        <body>
            <p>Content</p>
        </body>
    </html></textarea>

<h4>Url Helper</h4>
<textarea class="code">
    &lt;?php \Sloths\View\Helper\Url::setDefaultUrl('/foo/bar?foo=bar') ?&gt;

    &lt;?= $this->url(['search' => 'foo']) ?&gt; // /foo/bar?foo=bar&search=foo
    &lt;?= $this->url('/posts', ['search' => 'foo']) ?&gt; // /posts?search=foo</textarea>

<h4>Paginate Helper</h4>
<code>$paginator = new \Sloths\Pagination\Paginator($adapter);</code>
<br>
<p>
    <code>$adapter</code> can be:
    <ul>
        <li><code>\Sloths\Pagination\DataAdapter\ArrayAdapter</code></li>
        <li><code>\Sloths\Pagination\DataAdapter\DbSelect</code></li>
        <li><code>\Sloths\Pagination\DataAdapter\ModelCollection</code></li>
        <li><code>Array</code></li>
        <li><code>\Sloths\Db\Sql\Select</code></li>
        <li><code>\Sloths\Db\Model\Collection</code></li>
    </ul>
</p>
<code>routes/my-route.php</code>
<textarea class="code">

    $this->get('/', function() {
        \Sloths\View\Helper\Url::setDefaultUrl('#');
        // In the real work, it should be:
        // \Sloths\View\Helper\Url::setDefaultUrl($this->request->getUrl());

        $posts = [];
        for ($i = 0; $i < 100; $i++) {
            $posts[] = ['title' => 'post ' . $i];
        }

        $paginator = new \Sloths\Pagination\Paginator($posts);
        $paginator->setItemsCountPerPage(5);
        $paginator->setCurrentPage(8);

        return $this->render('posts/list', ['posts' => $posts]);
    });
</textarea>
<code>views/posts/list.html.php</code>
<textarea class="code" data-type="application/x-httpd-php">
    <ul>
        <? foreach ($posts as $post): ?>
        <li><?= $post['title'] ?></li>
        <? endforeach ?>
    </ul>
    <?= $this->paginate($posts) ?></textarea>

Output:
    <ul>
                <li>post 35</li>
                <li>post 36</li>
                <li>post 37</li>
                <li>post 38</li>
                <li>post 39</li>
            </ul>
    <ul class="pagination">
            <li><a href="#?page=7">«</a></li>
                <li><a href="#?page=3">3</a></li>
            <li><a href="#?page=4">4</a></li>
            <li><a href="#?page=5">5</a></li>
            <li><a href="#?page=6">6</a></li>
            <li><a href="#?page=7">7</a></li>
            <li class="active"><a href="#?page=8">8</a></li>
            <li><a href="#?page=9">9</a></li>
            <li><a href="#?page=10">10</a></li>
            <li><a href="#?page=11">11</a></li>
            <li><a href="#?page=12">12</a></li>
                <li><a href="#?page=9">»</a></li>
    </ul>        </div>
    </div>
</div>

<br>

<div class="container">
    <div class="row">
        <div class="col-md-9 col-md-offset-3">
            <hr>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'slothsframeworkdocumentation'; // required: replace example with your forum shortname

                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </div>
</div>

<hr>

<footer>
    <div class="container">
        <div>
            <div class="pull-left">
                <iframe src="http://ghbtns.com/github-btn.html?user=lytc&repo=sloths&type=watch&count=true"
                        allowtransparency="true" frameborder="0" scrolling="0" width="100" height="20"></iframe>
                <iframe src="http://ghbtns.com/github-btn.html?user=lytc&repo=sloths&type=fork&count=true"
                        allowtransparency="true" frameborder="0" scrolling="0" width="100" height="20"></iframe>
                <iframe src="http://ghbtns.com/github-btn.html?user=lytc&repo=sloths&type=follow&count=true"
                        allowtransparency="true" frameborder="0" scrolling="0" width="180" height="20"></iframe>
            </div>
        </div>
        <div class="pull-right">
            <ul class="list-inline">
                <li><a href="https://github.com/lytc/sloths">GitHub</a></li>
                <li><a href="/sloths/docs/installation.html">Documentation</a></li>
            </ul>
        </div>
    </div>
</footer>
<br>
<br>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

<script src="/sloths/assets/vendor/codemirror/4.1/lib/codemirror.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/lib/util/formatting.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/addon/edit/matchbrackets.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/htmlmixed/htmlmixed.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/xml/xml.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/javascript/javascript.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/css/css.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/clike/clike.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/php/php.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/nginx/nginx.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/sql/sql.js"></script>
<script src="/sloths/assets/javascripts/application.js"></script><script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-50648420-1', 'lytc.github.io');
    ga('send', 'pageview');

</script>
</body>
</html>